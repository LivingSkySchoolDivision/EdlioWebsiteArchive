(function(h){var e;var d;var n="";var j=false;var v=(window.edlio!==undefined&&window.edlio.mobile===true);var o;var c=false;var u={};function m(y){var z="right middle";var x="left middle";if(h(".pages-content-wrapper").width()<=650){z="top middle";x="bottom middle"}if(h(".pages-content-wrapper").hasClass("left-aligned")){z="left middle";x="right middle"}e.qtip({position:{my:z,at:x,adjust:{x:-2,y:-2}},content:{text:"Loading",ajax:{url:y,type:"GET",success:function(B,A){this.set("content.text",B);b()},loading:false}},show:{modal:{on:true},event:"ready",delay:0,ready:true},prerender:true,hide:false,style:{classes:"ui-tooltip-shadow ui-tooltip-bootstrap subscription-popup",tip:{height:20,width:30},width:380,height:false},events:{show:function(B,A){setTimeout(function(){h("#subscribe_form #firstName").focus()},1);h(document).bind("keydown",function(C){if(C.keyCode===27){A.hide(C)}})}}})}function b(){h("#subscribe_form").bind("submit",function(x){x.preventDefault();h.post(h(this).prop("action"),h(this).serialize(),function(y){if(y.indexOf("ERROR")>-1){g(y);b()}else{if(y!==""){g(y,true);l()}}})})}function g(x,y){if(v&&j){h("#overlay_content").html(x)}else{if(v){o.html(x)}else{var A=e.qtip("option","style.height");e.qtip("option",{"content.text":x,"style.height":A})}}if(y){var z;if(v&&j){z=r}else{if(v){z=function(){o.slideUp()}}else{z=function(){e.qtip("hide")}}}setTimeout(z,4000)}}function l(){var y=new Date();var x=y.getTime()+(365*30*24*60*60*1000);y.setTime(x);setCookie(n,"true",y);i()}function w(x){h('<div id="overlay_coverup" class="mobile-user-subscribe"></div>').appendTo("body").animate({opacity:0.86});var z=h('<div id="overlay_content_wrapper"></div>');z.appendTo("body");var y=h('<div id="overlay_content"></div>');y.appendTo(z);h.ajax(x,{type:"GET",success:function(B,A){y.html(B);y.on("click",".close-button",function(C){r()});b()}})}function r(){h("body").css("overflow","auto");h("#overlay_coverup").fadeOut("fast",function(){h(this).remove()});h("#overlay_content_wrapper").remove()}function s(x){h.ajax(x,{type:"GET",success:function(z,y){o.hide().html(z).slideDown();e.unbind("click.subscribe").bind("click.subscribe",a);b()}})}function a(x){x.preventDefault();o.slideUp(function(){e.unbind("click.subscribe").bind("click.subscribe",t)})}function i(){c=true;var x='<svg viewBox="0 0 2048 2048" class="icon"><use xlink:href="/apps/svg/icons.svg#check"></use></svg> Subscribed';x=x.replace("Subscribed",q("Subscribed"));e.html(x).addClass("is-subscribed");h(".whats-this").css("display","block")}function f(){cookievalue=getCookie(n);if(cookievalue!==null&&cookievalue!=="false"&&cookievalue!=="null"){return true}else{return false}}function t(y){y.preventDefault();var x=h(this).prop("href");if(c&&h(y.target).is(e)){return}if(v&&j){w(x)}else{if(v){s(x)}else{m(x)}}}function p(){n=e.data("cookiename");j=e.hasClass("user-subscribe");if(f()){i()}if(v){o=h('<div id="subscription_onpage_wrapper"></div>');d.append(o)}e.bind("click.subscribe",t);h(".whats-this").bind("click.subscribe",t)}h(document).ready(function(){e=h("#subscribe_button");d=h("#subscribe_button_wrapper");if(e.length>0){p()}});function q(x){if(u!=undefined){if(Object.keys(u).length==0){var y=JSON.stringify({template:"apps/js/pages/subscribe"});k(y)}if(x in u){return u[x]}}return x}function k(y,x){h.post("/apps/localization",y).then(function z(A,B){if(B!=="success"){console.log("there was a problem while localizing this template")}u=JSON.parse(A).localizations;i()})}})(jq18);