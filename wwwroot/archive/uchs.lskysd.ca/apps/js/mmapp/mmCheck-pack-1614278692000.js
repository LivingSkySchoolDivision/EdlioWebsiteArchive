(function(a){window.MMCheck={main:function(){this.MMCheckServlet=new ENRemoteService("/servlet/mmcheck");this.isUploading=0},setUploadID:function(b){this.uploadID=b},checkUploadStatus:function(){this.MMCheckServlet.async({onSuccess:function(d,c){if(d[0]=="uploaded"){MMCheck.isUploading=2}else{if(d[0]=="uploading"){MMCheck.isUploading=1}else{if(d[0]=="error "){}else{}}}if(MMCheck.isUploading!=2){setTimeout("MMCheck.checkUploadStatus()",2000)}},onError:function(d,c){alert("The request could not be processed due to an internal error. ")}},"checkUploadStatus",this.uploadID)},createQuickPost:function(){if(document.getElementById("user_home_page")&&document.getElementById("user_home_page").checked&&document.getElementById("f-embed-code").value.length>0){var c=new XMLHttpRequest();var b="/apps/quickpost/createpost/embed_video";var d={description:document.videoInfoForm.description.value.length>0?document.videoInfoForm.description.value:"",postToClasses:[],postToUserHomePage:true,postType:"embed_video",title:document.videoInfoForm.title.value.length>0?document.videoInfoForm.title.value:"",videoCode:document.videoInfoForm.embedCode.value.length>0?document.videoInfoForm.embedCode.value:""};c.open("POST",b,true);c.setRequestHeader("Content-type","application/json;charset=UTF-8");c.onreadystatechange=function(){};c.send(JSON.stringify(d))}},saveNewTitle:function(d){if(document.getElementById("no-sections")!=null&&document.getElementById("no-sections").style.display=="block"){return}if(document.videoInfoForm.title==null||document.videoInfoForm.title.value==""){document.querySelector("#videoInfo .warning").style.display="block";document.getElementById("f-title").classList.add("warning");document.getElementById("advance-button").classList.add("disabled");return}if(!(document.getElementById("embed-code-input").style.display=="block")&&!(document.getElementById("displayProgressDiv").style.display=="flex")){document.querySelector(".basic-bar-tabs .warning").classList.add("show");return}if(document.querySelector("#alt_text label").innerText.indexOf("*")>=0&&document.getElementById("f-alt").value==""&&!(document.getElementById("embed-code-input").style.display=="block")){document.querySelector("#alt_text .ada-input-warning").classList.add("show");document.getElementById("f-alt").classList.add("warning");return}var m=(document.videoInfoForm.title!=null)?document.videoInfoForm.title.value:"";var k=(document.videoInfoForm.description!=null)?document.videoInfoForm.description.value:"";var c=(document.videoInfoForm.transcript!=null)?document.videoInfoForm.transcript.value:"";var i=(document.videoInfoForm.language!=null)?document.videoInfoForm.language.value:"";var p=(document.videoInfoForm.tags!=null)?document.videoInfoForm.tags.value:"";var f=document.videoInfoForm.uploadID.value;var j=MMCheck.getSelectedCheckbox(document.getElementsByName("categories"));var b=(document.videoInfoForm.embedCode!=null)?document.videoInfoForm.embedCode.value:"";var n=(document.videoInfoForm.altText!=null)?document.videoInfoForm.altText.value:"";if(!document.videoInfoForm.transcript||(c.length==0&&window.MMCheck.transcriptEmptyOnPageload)){c=null}if((b.length>0&&((b.indexOf("<iframe")<0&&b.indexOf("<embed")<0&&b.indexOf("<video")<0)||b.indexOf("src=")<0))||(b.length===0)&&document.getElementById("embed-code-input").style.display=="block"){document.querySelector(".embed-warning").style.display="block";document.getElementById("f-embed-code").classList.add("warning");return false}var h=MMCheck.getSelectedCheckbox(a('.quickpost-checkboxes[name="classes"]'));var g=0;var o=0;var l=0;var e=0;if(document.getElementById("uservideoscb")!=null&&document.getElementById("uservideoscb").checked==1){o=1}if(document.getElementById("videogallerycb")!=null&&document.getElementById("videogallerycb").checked==1){g=1}if(document.getElementById("hidevideocb")!=null&&document.getElementById("hidevideocb").checked==1){l=1}if(document.getElementById("user_home_page")!=null&&document.getElementById("user_home_page").checked==1){e=1}document.getElementById(d).disabled=true;MMCheck.createQuickPost();this.MMCheckServlet.async({onSuccess:function(s,q){document.getElementById("saveVideoName").value="Save";document.getElementById(d).disabled=false;if(document.videoInfoForm.categoryREC_ID.value.length>0&&s[0]=="1"){var r=document.videoInfoForm.categoryREC_ID.value;window.location="/apps/video/admin/admin_index.jsp?categoryREC_ID="+r}else{if(document.videoInfoForm.userREC_ID.value.length>0&&s[0]=="1"){var t=document.videoInfoForm.userREC_ID.value;window.location="/apps/video/admin/admin_index.jsp?userREC_ID="+t}else{if(s[0]=="1"){window.location="/apps/video/admin/admin_index.jsp?showTitles=all"}}}},onError:function(r,q){alert("The request could not be processed due to an internal error. ")}},"saveNewTitle",f,m,k,c,p,j,o,g,l,h,e,b,n,i)},setTitleREC_IDs:function(b){this.titleREC_IDs=b},getSelectedCheckbox:function(b){var f=new Array();var e="";var d=0;if(b[0]){for(var c=0;c<b.length;c++){if(b[c].checked){f.length=d;f[d]=b[c].value;d++}}}else{if(b.checked){f.length=d;f[d]=0}}if(f.length>0){e=";"}for(var c=0;c<f.length;c++){e+=f[c]+";"}return e},updateNumberLikes:function(b){this.MMCheckServlet.async({onSuccess:function(d,c){if(d[0]==1){document.getElementById("rate"+b).innerHTML="You Like!";if(d[2]=="likes"&&d[4]=="dislikes"){MMCheck.updateRateBar(d[3],parseInt(d[3])+parseInt(d[5]),"rateBar"+b)}var e=new Date();e.setTime(e.getTime()+(10*60*1000));setCookie("mmRate"+b,"like",e.toGMTString())}},onError:function(d,c){alert("The request could not be processed due to an internal error. ")}},"updateRating",b,"like")},updateNumberDislikes:function(b){this.MMCheckServlet.async({onSuccess:function(d,c){if(d[0]==1){document.getElementById("rate"+b).innerHTML="You Dislike!";if(d[2]=="likes"&&d[4]=="dislikes"){MMCheck.updateRateBar(d[3],parseInt(d[3])+parseInt(d[5]),"rateBar"+b)}var e=new Date();e.setTime(e.getTime()+(10*60*1000));setCookie("mmRate"+b,"dislike",e.toGMTString())}},onError:function(d,c){alert("The request could not be processed due to an internal error. ")}},"updateRating",b,"dislike")},updateRateBar:function(g,l,m){var e=80;var k=document.getElementById(m);if(k!=null){var n=l-g;var f=(g/l*100);var j=(e/100*f);var d=(e/100*(100-f));if(isNaN(j)){j=1}if(isNaN(d)){d=1}var c=(e/l)-3;var h=0;if(c>25){c=25}else{if(c<0){c=0}}if(f==100){h=10;refreshRate=1}else{if(j<j){h=0}if(d<d){h=0}}j+=h;if(j>e){j=e}d+=h;if(d>e){d=e}f=(j/e*100);var b=["61c54b"];colorIndex=b.length-1;f=Math.round(f*100)/100;var i="<div style='width:100px;padding-left:15px;'><div style='border: 1px solid #000000; width: "+e+"px; margin-top: 0px;clear:both;float:left'><span style='background-color: #61c54b;'><img src=/apps/pics/spacer.gif height=7 width="+j+" border=0></span></div> <div style='border: 1px solid #000000; width: "+e+"px; margin-top: 3px;clear:both;float:left'><span style='background-color: red;'><img src=/apps/pics/spacer.gif height=7 width="+d+" border=0></span></div> </div>";k.innerHTML=i}},toggleFeature:function(c){var b=document.getElementById("STARBUTTON"+c).href;document.getElementById("STARBUTTON"+c).href="";this.MMCheckServlet.async({onSuccess:function(e,d){if(e[0]!=-1){if(e[0]==1){document.getElementById("SPANFEATURE"+c).innerHTML="Featured";document.getElementById("SPANFEATURE"+c).style.fontWeight="bold";document.getElementById("SPANFEATURE"+c).className="";document.getElementById("IMGFEATURE"+c).src="/apps/pics/star.png";document.getElementById("FEATUREDIV"+c).className="feature-button isfeatured"}else{document.getElementById("SPANFEATURE"+c).innerHTML="Feature This";document.getElementById("SPANFEATURE"+c).className="star-popup-featurethis";document.getElementById("SPANFEATURE"+c).style.fontWeight="normal";document.getElementById("IMGFEATURE"+c).src="/apps/pics/star_grey_flatter.png";document.getElementById("FEATUREDIV"+c).className="feature-button"}document.getElementById("STARBUTTON"+c).href=b}},onError:function(e,d){alert("The request could not be processed due to an internal error. ")}},"toggleFeature",c)},transcriptEmptyOnPageload:false};a(function(){if(document.videoInfoForm){window.MMCheck.transcriptEmptyOnPageload=!document.videoInfoForm.transcript||document.videoInfoForm.transcript.value==""}});window.MMCheckIsLoaded=function(){return true}})((typeof enJQ=="function"?enJQ:jQuery));